<!doctype html>
<html>
	<head>
		<title>REGISTRO DE INGRESOS</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="css/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" href="css/mis-estilos-Ingresos.css">
		<script src="js/jquery.js"></script>
		<script type="text/javascript" src="js/Chart.min.js"></script>
	</head>
	<body>
		
		<!--nav-->
		<div class="navbar navbar-default navbar-fixed-top naveg" role="navigation">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					</button>
					
					<button type="button" class="btn btn-default btn-lg">
  						<span class="glyphicon glyphicon-chevron-left" id="get-back"></span>
						<!-- <a class="navbar-brand titulo">PigBudget</a> -->
					</button>
				</div>
				<div class="collapse navbar-collapse">
					<ul class="nav navbar-nav">
						<li class="active"><a href="#">Perfil</a></li>
						<li><a href="#">Ingresos</a></li>
						<li><a href="#">Egresos</a></li>
					</ul>
				</div><!--/.nav-collapse -->
			</div>
		</div>
		<br/>
		<br/>
		<div class="container tabla">
			<div class="row">
				<div class="col-xs-12"><h3>RESUMEN INGRESOS</h3></div>
			</div>
			<div class="table-responsive">
				<table class="table table-bordered table-striped table-condensed table-hover">
					<thead>
						<tr>
							<th class="success">Ingreso</th>
							<th class="success">Fecha</th>
							<th class="success">Monto</th>
						</tr>
					</thead>
					<tbody id="result">
							
					</tbody>
					<tfoot id="total">

					</tfoot>
				</table>
			</div>
		</div>
		<div class = "container tabla">
			<a href="formularioIngreso.html" class="btn btn-primary btn-lg active" role="button">Agregar</a>
			<button class="btn btn-primary btn-lg active" id="stats" role="button">Grafica</button>
		</div>
		<div class="container grafica" style="display: none">
		</br>
			<canvas id="canvas" width="400" height="400"></canvas>
		</div>
		<script type="text/javascript" src="js/bootstrap.js"></script>
		<script>
			$(document).ready(function(){
			
				$.get('restIngreso.php').done(function(resultado){

					for(var i=0; i<resultado.length-1; ++i){
						var cadena = "<tr><td>"
						cadena += resultado[i].nombreIngreso;
						cadena += "</td><td>";
						cadena += resultado[i].fechaIngreso;
						cadena += "</td><td>";
						cadena += resultado[i].montoIngreso;
						cadena += "</td></tr>";

						$("#result").append(cadena);
					}
					var total = "<tr class='success'><td colspan='2'><strong>Total</strong</td><td>";
					total += resultado[resultado.length-1].totalIngreso;
					total += "</td></tr>";
					$("#total").append(total);
				});
				
				var lineChartData = {
					labels : ["Lun","Mar","Mie","Jue","Vie","Sab","Dom"],
					datasets : [
						{
							fillColor : "rgba(255,255,255,0.5)",
							strokeColor : "rgba(102,153,0,1)",
							pointColor : "rgba(168,211,36,1)",
							pointStrokeColor : "#a8d324",
							data : [44,100,15,44,66]
						},
					]
				}
				var myLine = new Chart(document.getElementById("canvas").getContext("2d")).Line(lineChartData);

				$('#stats').on('click', function(e){
					$('.tabla').hide();
					$('.grafica').show();
				})
				$('#get-back').on('click', function(e){
					$('.tabla').show();
					$('.grafica').hide();
				});
			});
		</script>
	</body>
</html>